# ๐ ุงููุดุฑ ุงูููุงุฆู ุนูู Railway - ุชูุนูู ุงููููุฑูููู

## โ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุงููุทููุจุฉ ูู Railway

### ูู Railway Dashboard โ Variablesุ ุฃุถู/ุชุญูู ูู:

```env
NODE_ENV=production
PORT=8080
ALLOWED_ORIGINS=https://royal-chat-production.up.railway.app
NEXT_PUBLIC_APP_URL=https://royal-chat-production.up.railway.app
NEXT_PUBLIC_WS_URL=wss://royal-chat-production.up.railway.app
```

---

## ๐ง ุฅุนุฏุงุฏุงุช Railway ุงููุทููุจุฉ

### 1. **Source Repo**:

- โ **Repository**: `mazenalalwi670/royal-chat`
- โ **Branch**: `main`

### 2. **Build Command**:

```
bun install && bun run build
```

### 3. **Start Command** (ููู ุฌุฏุงู!):

```
node server-custom.mjs
```

### 4. **Port**:

```
8080
```

---

## ๐ค ุชูุนูู ุงููููุฑูููู ุนูู HTTPS

### โ ุชู ุฅุถุงูุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุชุงููุฉ:

1. **ูู `next.config.mjs`**:

   - โ `Permissions-Policy: camera=*, microphone=*`
   - โ ูุฐุง ูุณูุญ ูููููุฑูููู ุจุงูุนูู ุนูู HTTPS

2. **ูู `app/components/chat/VoiceRecorder.tsx`**:

   - โ ุฏุนู ูุงูู ูู `getUserMedia` ุนูู HTTPS
   - โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณููุฉ
   - โ ุฏุนู Android ู iOS

3. **ูู `app/contexts/WebSocketContext.tsx`**:
   - โ ุงุณุชุฎุฏุงู `wss://` ุนูู HTTPS ุชููุงุฆููุง
   - โ ุฏุนู ุฅุนุงุฏุฉ ุงูุงุชุตุงู ุงูุชููุงุฆู

---

## ๐ ุฎุทูุงุช ุงููุดุฑ ุนูู Railway

### ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

1. ุงุฐูุจ ุฅูู: https://railway.com/project/263751f3-8b23-462b-9ef4-d784e4dc4d69/service/64458709-e909-4ab6-9ead-358b97215c9b/settings?environmentId=6be427b9-e516-4f17-a13c-b0281cd3f699

2. ูู ูุณู **Variables**ุ ุชุฃูุฏ ูู ูุฌูุฏ:
   ```
   NODE_ENV=production
   PORT=8080
   ALLOWED_ORIGINS=https://royal-chat-production.up.railway.app
   NEXT_PUBLIC_APP_URL=https://royal-chat-production.up.railway.app
   NEXT_PUBLIC_WS_URL=wss://royal-chat-production.up.railway.app
   ```

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู Start Command

1. ูู ููุณ ุงูุตูุญุฉุ ุงุฐูุจ ุฅูู **Deploy** โ **Custom Start Command**
2. ุชุฃูุฏ ูู ุฃู ุงููููุฉ ูู:
   ```
   node server-custom.mjs
   ```
3. ุฅุฐุง ูุงูุช ูุฎุชููุฉุ ุบููุฑูุง ูุงุถุบุท **Update**

### ุงูุฎุทูุฉ 3: ุฅุนุงุฏุฉ ุงููุดุฑ

1. ุงุฐูุจ ุฅูู **Deployments**
2. ุงุถุบุท **Redeploy** ุนูู ุขุฎุฑ deployment
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุจูุงุก (5-10 ุฏูุงุฆู)

---

## โ ุงูุชุญูู ูู ุฃู ูู ุดูุก ูุนูู

### ุจุนุฏ ุงููุดุฑ:

1. **ุงูุชุญ**: https://royal-chat-production.up.railway.app
2. **ุชุญูู ูู**:
   - โ ุงูุชุทุจูู ููุชุญ ุจุดูู ุตุญูุญ
   - โ WebSocket ูุชุตู (ูุฌุจ ุฃู ุชุฑู ุญุงูุฉ ุงูุงุชุตุงู)
   - โ ุงููููุฑูููู ูุนูู (ุงุถุบุท ุนูู ุฒุฑ ุงููููุฑูููู ูู ุฅุฏุฎุงู ุงูุฑุณุงูุฉ)

### ุงุฎุชุจุงุฑ ุงููููุฑูููู:

1. ุงูุชุญ ุงูุชุทุจูู ุนูู ุงููุงุชู
2. ุงุถุบุท ุนูู ุฒุฑ ุงููููุฑูููู ูู ุฅุฏุฎุงู ุงูุฑุณุงูุฉ
3. ูุฌุจ ุฃู ูุทูุจ ุงููุชุตูุญ ุงูุฅุฐู ูููููุฑูููู
4. ุงุถุบุท "ุงูุณูุงุญ"
5. ุงุจุฏุฃ ุงูุชุณุฌูู
6. ูุฌุจ ุฃู ุชุฑู ูุคุดุฑ ุงูุชุณุฌูู ูุนูู

---

## ๐ ูุชุทูุจุงุช HTTPS ูููููุฑูููู

### โ ุชู ุฅุนุฏุงุฏ ูู ุดูุก:

1. **Railway ูููุฑ HTTPS ุชููุงุฆููุง** โ
2. **Permissions-Policy ูุถุงู** โ
3. **getUserMedia ูุนูู ุนูู HTTPS** โ

### ููุงุญุธุงุช ูููุฉ:

- โ๏ธ **ุงููููุฑูููู ูุนูู ููุท ุนูู HTTPS** (ูุง ูุนูู ุนูู HTTP)
- โ Railway ูููุฑ HTTPS ุชููุงุฆููุง ุนุจุฑ `*.up.railway.app`
- โ ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ

---

## ๐ ุญู ุงููุดุงูู

### ุฅุฐุง ูู ูุนูู ุงููููุฑูููู:

1. **ุชุญูู ูู HTTPS**:

   - ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู `https://` ูููุณ `http://`
   - Railway ูููุฑ HTTPS ุชููุงุฆููุง

2. **ุชุญูู ูู ุงูุฃุฐููุงุช**:

   - ูู ุงููุชุตูุญุ ุงุฐูุจ ุฅูู ุฅุนุฏุงุฏุงุช ุงููููุน
   - ุชุฃูุฏ ูู ุฃู ุงููููุฑูููู ูุณููุญ

3. **ุชุญูู ูู Console**:

   - ุงูุชุญ Developer Tools (F12)
   - ุงุจุญุซ ุนู ุฃุฎุทุงุก ูู Console
   - ุชุญูู ูู ุฃู `getUserMedia` ูุนูู

4. **ุชุญูู ูู WebSocket**:
   - ุชุฃูุฏ ูู ุฃู `NEXT_PUBLIC_WS_URL` ูุถุจูุท ุนูู `wss://`
   - ุชุฃูุฏ ูู ุฃู WebSocket ูุชุตู

---

## โ ุงูุฎูุงุตุฉ

**ูู ุดูุก ุฌุงูุฒ ูููุดุฑ!**

1. โ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ูุญุฏุฏุฉ
2. โ Start Command ุตุญูุญ
3. โ ุงููููุฑูููู ููุนูู ุนูู HTTPS
4. โ WebSocket ูุนูู ุนูู WSS
5. โ Permissions-Policy ูุถุงู

**ุจุนุฏ ุงููุดุฑุ ูู ุดูุก ุณูุนูู ุจุดูู ุตุญูุญ!** ๐

---

## ๐ ููุงุญุธุฉ ููุงุฆูุฉ

ุฅุฐุง ูุงู ุงูุชุทุจูู ูุง ูุฒุงู ูุนุฑุถ "ุฌุงุฑู ุงูุชุญููู..."ุ ููุฐุง ูุนูู:

- ุฅูุง ุฃู ุงูุจูุงุก ูู ููุชู ุจุนุฏ
- ุฃู ุฃู ููุงู ุฎุทุฃ ูู Start Command
- ุฃู ุฃู ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ ุบูุฑ ุตุญูุญุฉ

**ุชุญูู ูู Logs ูู Railway Dashboard ููุนุฑูุฉ ุงููุดููุฉ.**
